{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\nconst API_KEY = '45187829-ea2cd24770d3667653c872a41';\nexport const PER_PAGE = 15;\nexport const PAGE_INIT = 1;\n\n\nexport const fetchImages = async (searchRequest, per_page, page = PAGE_INIT) => {\n    const configParams = {\n        params: {\n            key: API_KEY,\n            q: encodeURIComponent(searchRequest),\n            image_type: \"photo\",\n            orientation: \"horizontal\",\n            safesearch: true,\n            lang: \"en\",\n            per_page,\n            page\n        }\n    }\n    const response = await axios.get(`https://pixabay.com/api`, configParams);\n    return response.data;\n};\n\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nexport let iziToastOptions = {\n    message: `Sorry, there are no images matching your search query. Please try again!`,\n    backgroundColor: '#ef4040',\n    iconUrl: \"data:image/svg+xml,%3Csvg width='24' height='24' viewBox='0 0 24 24' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M6.81 0.219C6.95056 0.0787966 7.14097 4.21785e-05 7.3395 0L16.6605 0C16.859 4.21785e-05 17.0494 0.0787966 17.19 0.219L23.781 6.81C23.9212 6.95056 24 7.14097 24 7.3395V16.6605C24 16.859 23.9212 17.0494 23.781 17.19L17.19 23.781C17.0494 23.9212 16.859 24 16.6605 24H7.3395C7.14097 24 6.95056 23.9212 6.81 23.781L0.219 17.19C0.0787966 17.0494 4.21785e-05 16.859 0 16.6605L0 7.3395C4.21785e-05 7.14097 0.0787966 6.95056 0.219 6.81L6.81 0.219ZM7.65 1.5L1.5 7.65V16.35L7.65 22.5H16.35L22.5 16.35V7.65L16.35 1.5H7.65Z' fill='%23FAFAFB'/%3E%3Cpath d='M6.969 6.969C7.03867 6.89915 7.12143 6.84374 7.21255 6.80593C7.30366 6.76812 7.40135 6.74866 7.5 6.74866C7.59865 6.74866 7.69633 6.76812 7.78745 6.80593C7.87857 6.84374 7.96133 6.89915 8.031 6.969L12 10.9395L15.969 6.969C16.0387 6.89927 16.1215 6.84395 16.2126 6.80621C16.3037 6.76847 16.4014 6.74905 16.5 6.74905C16.5986 6.74905 16.6963 6.76847 16.7874 6.80621C16.8785 6.84395 16.9613 6.89927 17.031 6.969C17.1007 7.03873 17.156 7.12151 17.1938 7.21262C17.2315 7.30373 17.2509 7.40138 17.2509 7.5C17.2509 7.59861 17.2315 7.69626 17.1938 7.78737C17.156 7.87848 17.1007 7.96127 17.031 8.031L13.0605 12L17.031 15.969C17.1007 16.0387 17.156 16.1215 17.1938 16.2126C17.2315 16.3037 17.2509 16.4014 17.2509 16.5C17.2509 16.5986 17.2315 16.6963 17.1938 16.7874C17.156 16.8785 17.1007 16.9613 17.031 17.031C16.9613 17.1007 16.8785 17.156 16.7874 17.1938C16.6963 17.2315 16.5986 17.2509 16.5 17.2509C16.4014 17.2509 16.3037 17.2315 16.2126 17.1938C16.1215 17.156 16.0387 17.1007 15.969 17.031L12 13.0605L8.031 17.031C7.96127 17.1007 7.87848 17.156 7.78737 17.1938C7.69626 17.2315 7.59861 17.2509 7.5 17.2509C7.40138 17.2509 7.30373 17.2315 7.21262 17.1938C7.12151 17.156 7.03873 17.1007 6.969 17.031C6.89927 16.9613 6.84395 16.8785 6.80621 16.7874C6.76847 16.6963 6.74905 16.5986 6.74905 16.5C6.74905 16.4014 6.76847 16.3037 6.80621 16.2126C6.84395 16.1215 6.89927 16.0387 6.969 15.969L10.9395 12L6.969 8.031C6.89915 7.96133 6.84374 7.87857 6.80593 7.78745C6.76812 7.69633 6.74866 7.59865 6.74866 7.5C6.74866 7.40135 6.76812 7.30366 6.80593 7.21255C6.84374 7.12143 6.89915 7.03867 6.969 6.969Z' fill='%23FAFAFB'/%3E%3C/svg%3E\",\n    titleLineHeight: '1.5',\n    titleSize: '16px',\n    theme: 'dark',\n    messageLineHeight: '1.5',\n    messageSize: '16px',\n};\nconst initSimpleLightbox = () => {\n    // Initialize SimpleLightbox\n    let gallery = new SimpleLightbox('.gallery-link', {\n        captions: 1, // Enable captions\n        captionSelector: 'img', // Use the img element to get the caption\n        captionType: 'attr', // Use attribute to get the caption\n        captionsData: 'alt', // Get the caption from the 'alt' attribute\n        captionPosition: 'bottom', // Position of the caption\n        captionDelay: 250, // Delay before showing the caption\n        overlay: 1,\n        overlayOpacity: 0.8\n    });\n    gallery.refresh();\n};\n\nconst galleryEl = document.querySelector(\".gallery\");\n\nconst capitalizeFirstLetter = (string) => {\n    if (!string) return string;\n    const [first, ...rest] = string;\n    return `${first.toUpperCase()}${rest.join('')}`;\n};\n\nexport const toggleVisibility = (elementClassName, isVisible) => {\n    const element = document.querySelector(elementClassName);\n    if (element) {\n        element.classList.toggle(\"is-visible\", isVisible);\n    }\n};\n\nconst generateDescriptionItems = ({ likes, views, comments, downloads }) =>\n    Object.entries({ likes, views, comments, downloads })\n        .map(([key, value]) => `\n            <li class=\"description-item\">\n                <h2 class=\"property-title\">${capitalizeFirstLetter(key)}</h2>\n                <p class=\"property-value\">${value}</p>\n            </li>\n        `).join(\"\");\n\nexport const renderImages = (data) => {\n    if (data.totalHits == 0) {\n        toggleVisibility(\".loader\", false);\n        iziToast.error(iziToastOptions);\n        return data;\n    }\n    const markup = data.hits\n        .map((hit) => {\n            return `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${hit.largeImageURL}\">\n            <img class=\"gallery-image\"\n                src=\"${hit.webformatURL}\"\n                alt=\"${hit.tags}\"\n                data-source=\"${hit.largeImageURL}\"\n            />\n            <ul class=\"description-list\">\n             ${generateDescriptionItems(hit)}\n             </ul> \n        </a>\n    </li>`\n        })\n        .join(\"\");\n    toggleVisibility(\".loader\", false);\n    galleryEl.insertAdjacentHTML(\"beforeend\", markup);\n    initSimpleLightbox();\n    return data;\n};\n\nexport const scrollDownGallery = () => {\n    const img = document.querySelector(\".gallery-image\");\n    let height = img.getBoundingClientRect().height;\n    window.scrollBy({\n        top: 2 * (height),\n        behavior: \"smooth\",\n    });\n};\n\n\n\n","import { fetchImages, PER_PAGE, PAGE_INIT } from './js/pixabay-api.js';\nimport { iziToastOptions, renderImages, toggleVisibility, scrollDownGallery } from './js/render-functions.js';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nlet page_number;\n\nconst searchForm = document.querySelector(\".search-form\");\nconst galleryEl = document.querySelector(\".gallery\");\nconst loadMoreBtn = document.querySelector(\".load-more-btn\");\nlet prevSearchRequest = null;\n\nconst checkPagination = ({ totalHits }, page_number) => {\n    const totalPages = Math.ceil(totalHits / PER_PAGE);\n\n    //visible when pictures exist and page number less then totalPages\n    const visible = totalHits > 0 && page_number < totalPages;\n    toggleVisibility(\".load-more-btn\", visible);\n\n    //Show this message only when all pages have been viewed.\n    if (page_number >= totalPages && totalHits !== 0) {\n        return iziToast.info({\n            message: \"We're sorry, there are no more posts to load\"\n        });\n    }\n};\n\nconst showError = (error) => {\n    console.error(error);\n    iziToastOptions.message = error.message;\n    iziToast.error(iziToastOptions);\n}\n\nsearchForm.addEventListener(\"submit\", (event) => {\n    // init/reset actions\n    page_number = PAGE_INIT;\n    event.preventDefault();\n    galleryEl.innerHTML = \"\";\n    toggleVisibility(\".load-more-btn\", false);\n\n    // get input words\n    const searchRequest = searchForm.search.value.trim();\n    if (!searchRequest) {\n        prevSearchRequest = null;\n        iziToastOptions.message = `Fill search field`;\n        iziToast.error(iziToastOptions);\n    } else {\n        prevSearchRequest = searchRequest;\n        toggleVisibility(\".loader\", true);\n        fetchImages(searchRequest, PER_PAGE)\n            .then(response => renderImages(response))\n            .then(data => checkPagination(data, page_number))\n            .catch(error => {\n                showError(error);\n            });\n    }\n});\n\nloadMoreBtn.addEventListener(\"click\", (event) => {\n    page_number++;\n    toggleVisibility(\".loader\", true);\n    toggleVisibility(\".load-more-btn\", false);\n    fetchImages(prevSearchRequest, PER_PAGE, page_number)\n        .then(response => renderImages(response))\n        .then(data => checkPagination(data, page_number))\n        .then(() => scrollDownGallery())\n        .catch(error => {\n            showError(error);\n        });\n});\n\n\n\n\n"],"names":["API_KEY","PER_PAGE","PAGE_INIT","fetchImages","searchRequest","per_page","page","configParams","axios","iziToastOptions","initSimpleLightbox","SimpleLightbox","galleryEl","capitalizeFirstLetter","string","first","rest","toggleVisibility","elementClassName","isVisible","element","generateDescriptionItems","likes","views","comments","downloads","key","value","renderImages","data","iziToast","markup","hit","scrollDownGallery","height","page_number","searchForm","loadMoreBtn","prevSearchRequest","checkPagination","totalHits","totalPages","visible","showError","error","event","response"],"mappings":"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"}